<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Work Hub</title>
    <link rel="icon" href="data:,"> 
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="toggle-buttons">
        <button id="toggle-sidebar" class="btn btn-secondary btn-small" title="Toggle Actions Sidebar">â˜°</button>
        <button id="theme-toggle" class="btn btn-secondary btn-small" title="Toggle Dark/Light Mode">ðŸŒ™</button>
        <button id="toggle-tools" class="btn btn-secondary btn-small" title="Toggle Tools Pane">Tools</button>
        <button id="toggle-calendar" class="btn btn-secondary btn-small" title="Toggle Calendar Pane">Calendar</button>
        <button id="toggle-todos" class="btn btn-secondary btn-small" title="Toggle To-Dos Pane">To-Dos</button>
    </div>

    <div class="hub-container">
        <aside class="sidebar" id="sidebar">
            <h2>Actions</h2>
            
            <div class="data-actions">
                <!-- 1. Vault Login -->
                <div id="drive-config-section">
                    <h3>Vault Login</h3>
                    <div id="vault-login-fields">
                        <div class="form-group">
                            <label for="vault-user">Username</label>
                            <input type="text" id="vault-user" placeholder="e.g. admin" class="small-input">
                        </div>
                        <div class="form-group">
                            <label for="vault-pass">Vault Password</label>
                            <input type="password" id="vault-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" class="small-input">
                        </div>
                        <button id="vault-login-btn" class="btn btn-secondary btn-small" style="width:100%">Login & Sync</button>
                    </div>

                    <div id="hidden-config" style="display:none;">
                        <input type="password" id="conf-url">
                        <input type="password" id="conf-id">
                        <input type="password" id="conf-pw">
                    </div>
                </div>

                <!-- 2. System Console (New) -->
                <h3 style="margin-top: 20px;">System Console</h3>
                <div class="console-wrapper">
                    <div id="system-console" class="console-box">
                        <div class="log-entry"><span class="log-time">System:</span> Ready.</div>
                    </div>
                    <button id="clear-console-btn" class="btn btn-secondary btn-small" style="width:100%; margin-top:5px;">Clear Log</button>
                </div>

                <div id="cloud-status" class="cloud-status-indicator"></div>
                
                <!-- 3. Cloud Buttons -->
                <h3 style="margin-top: 20px;">Cloud Sync</h3>
                <div class="data-actions-row">
                    <button id="save-to-cloud-btn" class="btn">Save to Drive</button>
                    <button id="load-from-cloud-btn" class="btn">Load from Drive</button>
                </div>
                
                <!-- 4. Local Data -->
                <h3 style="margin-top: 20px;">Local Data</h3>
                <div class="data-actions-row">
                    <button id="export-btn" class="btn">Export Data</button>
                    <div class="btn-import-wrapper">
                        <button class="btn">Import Data</button>
                        <input type="file" id="import-file" accept=".json">
                    </div>
                </div>
            </div>
            
            <hr style="margin: 25px 0; border: 0; border-top: 1px solid var(--border-color);">

            <h3>Add/Edit Tool</h3>
            <form id="add-tool-form">
                <div class="form-group">
                    <label for="tool-name">Tool Name</label>
                    <input type="text" id="tool-name" required>
                </div>
                <div class="form-group">
                    <label for="tool-url">Tool URL</label>
                    <input type="url" id="tool-url" placeholder="e.g., file:///C:/tools/my-tool.html" required>
                </div>
                <div class="form-group">
                    <label>Category & Color</label>
                    <div class="category-group">
                        <div class="category-name">
                             <input type="text" id="tool-category" list="category-suggestions" placeholder="Category Name">
                             <datalist id="category-suggestions"></datalist>
                        </div>
                        <input type="color" id="tool-category-color" value="#3498db" title="Category Color">
                    </div>
                </div>
                <div class="form-group">
                    <label for="tool-status">Status</label>
                    <select id="tool-status">
                        <option value="not-set">Not Set</option>
                        <option value="working">Working</option>
                        <option value="unfinished">Unfinished</option>
                        <option value="issues-to-be-fixed">Issues to be fixed</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="tool-description">Description</label>
                    <textarea id="tool-description"></textarea>
                </div>
                <button type="submit">Add Tool</button>
            </form>

            <h3>Add To-Do</h3>
            <form id="add-todo-form">
                <div class="form-group">
                    <label for="todo-text">Task</label>
                    <textarea id="todo-text" required></textarea>
                </div>
                <div class="form-group">
                    <label>Category & Color</label>
                    <div class="category-group">
                        <div class="category-name">
                             <input type="text" id="todo-category" list="category-suggestions" placeholder="Category Name">
                        </div>
                        <input type="color" id="todo-category-color" value="#3498db" title="Category Color">
                    </div>
                </div>
                <div class="form-group">
                    <label for="todo-due-date">Due Date</label>
                    <input type="date" id="todo-due-date">
                </div>
                <div class="form-group">
                    <label for="todo-linked-tools">Link Tools (optional)</label>
                    <select id="todo-linked-tools" multiple>
                        </select>
                </div>
                <button type="submit">Add To-Do</button>
            </form>
        </aside>

    <main class="main-content" id="main-content">
        <!-- PANE 1: TOOLS -->
        <div class="content-pane" id="tools-pane">
            <div class="pane-header">
                <h2>My Tools</h2>
                <div class="header-controls">
                    <input type="search" id="tool-search-input" class="filter-input" placeholder="Filter by name/desc...">
                    <button id="launch-all-btn" class="btn btn-small" disabled>Launch All</button>
                </div>
            </div>
            <div class="pane-body">
                <div id="category-filters"></div>
                <div id="tool-list-container"></div>
            </div>
        </div>

        <!-- GUTTER 1 -->
        <div class="gutter" id="gutter-1"></div>

        <!-- PANE 2: CALENDAR (NEW) -->
        <div class="content-pane" id="calendar-pane">
            <div class="pane-header">
                <h2>Year Planner</h2>
                <div></div>
            </div>
            <div class="pane-body">
                <!-- Smart Header -->
                <div class="smart-header">
                    <div class="smart-title" id="smart-date-display">Loading...</div>
                    <div class="smart-info" id="smart-event-display">Loading...</div>
                </div>

                <!-- Settings Panel -->
                <div class="settings-panel">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; padding-bottom:5px; border-bottom:1px solid #ccc;">
                        <span style="font-weight:bold; color:#000080; font-size:14px;">Configuration & Categories</span>
                        <button id="toggle-cal-settings-btn" class="btn btn-secondary btn-small" style="font-size:11px; padding:2px 8px;">_</button>
                    </div>

                    <!-- Wrapper for collapsible content -->
                    <div id="cal-settings-content">
                        <div class="row-flex">
                            <div class="input-group">
                                <label>View Year</label>
                                <input type="number" id="config-year" value="2026" style="width: 70px; font-weight:bold;">
                            </div>
                            <div class="input-group">
                                <label>Jan Weeks</label>
                                <input type="number" id="w-jan" value="5" min="4" max="6" style="width: 40px;">
                            </div>
                            <div class="input-group">
                                <label>Dec Weeks</label>
                                <input type="number" id="w-dec" value="6" min="4" max="6" style="width: 40px;">
                            </div>
                            <div class="input-group" style="flex:1;">
                                <label>Week Pattern (Manual)</label>
                                <textarea id="week-pattern-input"></textarea>
                            </div>
                            <button id="btn-reset-pattern" class="cal-btn btn-gray">Reset</button>
                        </div>

                        <div class="divider"></div>

                        <div class="row-flex">
                            <div style="display:flex; gap:10px; align-items:flex-end; border-right:1px solid #ccc; padding-right:20px;">
                                <div class="input-group">
                                    <label>Copy events to:</label>
                                    <input type="number" id="copy-target-year" value="2027" style="width: 60px;">
                                </div>
                                <button id="btn-copy-year" class="cal-btn btn-green">Copy All</button>
                            </div>

                            <div style="flex:1; display:flex; gap:10px; align-items:flex-end;">
                                <div class="input-group">
                                    <label>New Category</label>
                                    <input type="text" id="new-cat-name" placeholder="Name">
                                </div>
                                <div class="input-group">
                                    <label>Color</label>
                                    <input type="color" id="new-cat-color" value="#33ccff" style="width:40px; padding:0;">
                                </div>
                                <button id="btn-add-cat" class="cal-btn btn-blue">Add</button>
                            </div>
                        </div>
                        <div id="cat-list-display" style="display:flex; flex-wrap:wrap; margin-top:5px;"></div>
                    </div>
                </div>

                <!-- Editor Panel -->
                <div class="editor-panel row-flex">
                    <div class="input-group">
                        <label>Start Date</label>
                        <input type="date" id="input-start-date">
                    </div>
                    <div class="input-group">
                        <label>End Date (Range)</label>
                        <input type="date" id="input-end-date">
                    </div>
                    <div class="input-group">
                        <label>Type</label>
                        <select id="event-type"></select>
                    </div>
                    <div class="input-group">
                        <label>Event Name</label>
                        <input type="text" id="event-name" placeholder="Name" style="width:160px;">
                    </div>
                    <div class="input-group">
                        <label>Time</label>
                        <input type="text" id="event-time" placeholder="0:00" value="0:00" style="width: 60px;">
                    </div>
                    <div style="padding-bottom:5px;">
                        <label style="font-size:12px; cursor: pointer; display:flex; align-items:center;">
                            <input type="checkbox" id="event-highlight" checked> Highlight
                        </label>
                    </div>
                    <button id="btn-save-event" class="cal-btn btn-save">Save</button>
                    <button id="btn-del-event" class="cal-btn btn-del">Delete</button>
                    <div id="day-events-list"></div>
                </div>

                <!-- Grids -->
                <div class="calendar-wrapper">
                    <div id="calendar-top"></div>
                    <div id="calendar-bottom"></div>
                </div>

                <!-- Lists -->
                <div id="lists-container" class="lists-wrapper"></div>
            </div>
        </div>

        <!-- GUTTER 2 -->
        <div class="gutter" id="gutter-2"></div>

        <!-- PANE 3: TODOS -->
        <div class="content-pane" id="todos-pane">
            <div class="pane-header">
                <h2>My To-Do List</h2>
                <input type="search" id="todo-search-input" class="filter-input" placeholder="Filter by task...">
            </div>
            <div class="pane-body">
                <div class="todo-options">
                    <label><input type="checkbox" id="show-done-todos" checked> Show Completed</label>
                </div>
                <div id="todo-list-container"></div>
            </div>
        </div>
    </main>
    </div>
    
    <script src="script.js" defer></script>
</body>
</html>